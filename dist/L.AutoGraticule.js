!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],e):"object"==typeof exports?exports["L.AutoGraticule"]=e(require("leaflet")):t["L.AutoGraticule"]=e(t.L)}(window,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};e.__esModule=!0;var a=i(n(1));function u(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}function s(t,e){if(t<=0||!isFinite(t))throw"Invalid number "+t;if(e&&t>=5)return 5;if(t<=10){for(var n=1;t>1;)n*=10,t/=10;for(;t<=.1;)n/=10,t*=10;return.1==t?u(.1*n,12):t<=.2?u(.2*n,12):t<=.5?u(.5*n,12):n}return t<=30?30:t<=45?45:t<=60?60:90}function l(t,e){var n=t instanceof a.LatLngBounds?t:a.default.latLngBounds(t),r=e instanceof a.LatLngBounds?e:a.default.latLngBounds(e);return a.default.latLngBounds([[Math.max(n.getSouth(),r.getSouth()),Math.max(n.getWest(),r.getWest())],[Math.min(n.getNorth(),r.getNorth()),Math.min(n.getEast(),r.getEast())]])}n(2);var c=function(t){function e(e){var n=t.call(this)||this;return n.options={redraw:"moveend",minDistance:100},n.lineStyle={stroke:!0,color:"#111",opacity:.6,weight:1,interactive:!1},a.default.Util.setOptions(n,e),n}return o(e,t),e.prototype.onAdd=function(t){return this._map=t,this.redraw(),this._map.on("viewreset "+this.options.redraw,this.redraw,this),this.eachLayer(t.addLayer,t),this},e.prototype.onRemove=function(t){return t.off("viewreset "+this.options.redraw,this.redraw,this),this.eachLayer(this.removeLayer,this),this},e.prototype.redraw=function(){return this._bounds=this._map.getBounds().pad(.5),this.clearLayers(),this.constructLines(),this},e.prototype.constructLines=function(){var t=this._map.getBounds(),e=this._map.getZoom();this._bounds=l(t,[[-85,-180],[85,180]]);var n=this._map.getBounds;try{this._map.getBounds=function(){return l(n.apply(this),[[-85,-180],[85,180]])};for(var r=this._map.project(t.getCenter(),e),o=s(u(this._map.unproject(r.add([this.options.minDistance/2,0]),e).lng-this._map.unproject(r.subtract([this.options.minDistance/2,0]),e).lng,12),!1),i=Math.max(t.getWest(),-180),a=Math.min(t.getEast(),180),c=Math.ceil(u(i/o,12))*o;c<=a;c+=o)this.addLayer(this.buildXLine(c)),this.addLayer(this.buildLabel("gridlabel-horiz",u(c,12)));if(t.getNorth()>0)for(var f=Math.max(0,t.getSouth()),d=!0;f<t.getNorth()&&f<85;){var p=this._map.project([f,t.getCenter().lng],e),h=s(u((g=this._map.unproject(p.subtract([0,this.options.minDistance]),e)).lat-f,12),!0);f=u(d?Math.ceil(u(f/h,12))*h:Math.ceil(u(g.lat/h,12))*h,2),d=!1,this.addLayer(this.buildYLine(f)),this.addLayer(this.buildLabel("gridlabel-vert",f))}if(t.getSouth()<0)for(f=Math.min(0,t.getNorth()),d=!0;f>t.getSouth()&&f>-85;){p=this._map.project([f,t.getCenter().lng],e);var g,v=s(u(f-(g=this._map.unproject(p.add([0,this.options.minDistance]),e)).lat,12),!0);f=u(d?Math.floor(u(f/v,12))*v:Math.floor(u(g.lat/v,12))*v,2),d=!1,this.addLayer(this.buildYLine(f)),this.addLayer(this.buildLabel("gridlabel-vert",f))}}finally{this._map.getBounds=n}},e.prototype.buildXLine=function(t){var e=new a.default.LatLng(this._bounds.getSouth(),t),n=new a.default.LatLng(this._bounds.getNorth(),t);return new a.default.Polyline([e,n],this.lineStyle)},e.prototype.buildYLine=function(t){var e=new a.default.LatLng(t,this._bounds.getWest()),n=new a.default.LatLng(t,this._bounds.getEast());return new a.default.Polyline([e,n],this.lineStyle)},e.prototype.buildLabel=function(t,e){var n,r=this._map.getBounds().pad(-.003);return n="gridlabel-horiz"==t?new a.default.LatLng(r.getNorth(),e):new a.default.LatLng(e,r.getWest()),a.default.marker(n,{interactive:!1,icon:a.default.divIcon({iconSize:[0,0],className:"leaflet-grid-label",html:'<div class="'+t+'">'+e+"&#8239;Â°</div>"})})},e}(a.default.LayerGroup);e.default=c,a.default.AutoGraticule=c,a.default.autoGraticule=function(t){return new a.default.AutoGraticule(t)}},function(e,n){e.exports=t},function(t,e,n){var r=n(3),o=n(4);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1},a=(r(o,i),o.locals?o.locals:{});t.exports=a},function(t,e,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function u(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],o=0;o<t.length;o++){var i=t[o],s=e.base?i[0]+e.base:i[0],l=n[s]||0,c="".concat(s," ").concat(l);n[s]=l+1;var f=u(c),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(a[f].references++,a[f].updater(d)):a.push({identifier:c,updater:v(d,e),references:1}),r.push(c)}return r}function l(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var c,f=(c=[],function(t,e){return c[t]=e,c.filter(Boolean).join("\n")});function d(t,e,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=f(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function p(t,e,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var h=null,g=0;function v(t,e){var n,r,o;if(e.singleton){var i=g++;n=h||(h=l(e)),r=d.bind(null,n,i,!1),o=d.bind(null,n,i,!0)}else n=l(e),r=p.bind(null,n,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=o());var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var o=u(n[r]);a[o].references--}for(var i=s(t,e),l=0;l<n.length;l++){var c=u(n[l]);0===a[c].references&&(a[c].updater(),a.splice(c,1))}n=i}}}},function(t,e,n){(e=n(5)(!1)).push([t.i,".leaflet-grid-label .gridlabel-vert {\n    margin-left: 8px;\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n}\n\n.leaflet-grid-label .gridlabel-vert,\n.leaflet-grid-label .gridlabel-horiz {\n    padding-left:2px;\n    text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\n}\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=(a=r,u=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(s," */")),i=r.sources.map((function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")}));return[n].concat(i).concat([o]).join("\n")}var a,u,s;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var u=0;u<t.length;u++){var s=[].concat(t[u]);r&&o[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),e.push(s))}},e}}])}));
//# sourceMappingURL=L.AutoGraticule.js.map